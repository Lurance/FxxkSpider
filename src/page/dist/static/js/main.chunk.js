(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){n(19),e.exports=n(25)},19:function(e,t,n){"use strict";"undefined"==typeof Promise&&(n(20).enable(),window.Promise=n(23)),n(24),Object.assign=n(8)},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=n(1),a=n(27),r=n(16),s=n(34),c=n(55),u=n(56);a.render(l.createElement(r.HashRouter,null,l.createElement(r.Switch,null,l.createElement(u.default,null,l.createElement(r.Route,{path:"/",exact:!0,component:c.default}),l.createElement(r.Route,{path:"/create",component:s.default})))),document.getElementById("root"),()=>console.log("Page 服务已启动"))},34:function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var a,r=arguments.length,s=r<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,l);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(57),c=n(35);let u=class extends r.Component{constructor(e){super(e),this.state={gameName:"",startPage:1,endPage:void 0,ms:void 0,task:null,showResult:[],selectType:"1"}}runPoll(e){this.sto=setTimeout(()=>{e&&e(),this.runPoll(e)},1e3)}getTaskDetail(e){return()=>{c.default.get(`/api/task/${e}`).then(e=>{if(1===e.data.status){clearTimeout(this.sto);const t=e.data;this.setState({task:t,showResult:JSON.parse(t.rawResult)})}})}}handleSubmit(e){const{gameName:t,startPage:n,endPage:l,ms:a}=this.state;e.preventDefault(),c.default.post("/api/task",{gameName:t,startPage:n,endPage:l,ms:1e3*a}).then(e=>{if(0===e.data.error){const t=e.data.data._id;this.runPoll(this.getTaskDetail(t))}})}handleValueChange(e){const t={};t[e.target.name]=e.target.value,this.setState(t)}handleSelectChange(e){try{const t=e.target.value,{task:n}=this.state,l=n.rawResult;if("2"===t){const e=JSON.parse(l).sort((e,t)=>Math.floor(t.diff_price)-Math.floor(e.diff_price));this.setState({showResult:[...e],selectType:"2"})}else{const e=JSON.parse(l);this.setState({showResult:[...e],selectType:"1"})}}catch(e){alert("未取得任务单数据")}}render(){const{showResult:e,selectType:t}=this.state;return r.createElement("section",{style:{textAlign:"center"}},r.createElement("h1",null,"创建任务单"),r.createElement("form",{onSubmit:this.handleSubmit},r.createElement("label",null,"游戏名："),r.createElement("input",{type:"text",onChange:this.handleValueChange,name:"gameName"}),r.createElement("br",null),r.createElement("br",null),r.createElement("label",null,"开始页数："),r.createElement("input",{type:"number",onChange:this.handleValueChange,name:"startPage"}),r.createElement("br",null),r.createElement("br",null),r.createElement("label",null,"结束页数："),r.createElement("input",{type:"number",onChange:this.handleValueChange,name:"endPage"}),r.createElement("br",null),r.createElement("br",null),r.createElement("label",null,"延时："),r.createElement("input",{type:"text",onChange:this.handleValueChange,name:"ms"}),r.createElement("br",null),r.createElement("br",null),r.createElement("button",{type:"onSubmit"},"开始    ！"),r.createElement("br",null),r.createElement("br",null),r.createElement("p",null,"排序规则：",r.createElement("select",{onChange:this.handleSelectChange,value:t},r.createElement("option",{value:1},"默认（buff规则）"),r.createElement("option",{value:2},"价差降序"))),r.createElement("ul",null,e.map(e=>r.createElement("li",{key:e.id},"名称：",e.name,r.createElement("br",null),r.createElement("br",null),"buff出售价格：",e.sell_min_price,"元",r.createElement("br",null),r.createElement("br",null),"steam出售价格：",e.steam_price_cny,"元",r.createElement("br",null),r.createElement("br",null),"价差：",e.diff_price,r.createElement("br",null),r.createElement("br",null),r.createElement("img",{src:e.icon_url,onClick:()=>window.open(e.buff_goods_url),style:{width:"80px"}}),r.createElement("br",null),r.createElement("br",null),r.createElement("hr",null))))))}};u=l([s.autobind,a("design:paramtypes",[Object])],u),t.default=u},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=n(1);t.default=class extends l.Component{render(){return"Task LIst"}}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=n(1),a=n(16);t.default=class extends l.Component{render(){return l.createElement("div",null,l.createElement("nav",{style:{textAlign:"center",width:"100vw",margin:"0 0 50px 0"}},l.createElement(a.Link,{to:"/",style:{margin:"0 30px "}},"当前任务单"),l.createElement(a.Link,{to:"/create",style:{margin:"0 30px "}},"创建新任务单")),this.props.children)}}}},[[18,2,1]]]);
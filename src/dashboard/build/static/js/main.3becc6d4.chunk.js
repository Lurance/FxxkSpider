(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){e.exports=a(222)},123:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n,r,l,c=a(1),u=a(9),s=(a(123),a(229)),o=a(230),i=a(231),m=a(26),h=a(27),p=a(52),b=a(28),d=a(53),E=a(39),g=a(40),k=a.n(g),f=a(228),y=a(223),v=Object(E.a)(n=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={gameName:"",startPage:1,endPage:void 0,task:null,selectType:"1"},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"runPoll",value:function(e){var t=this;this.sto=setTimeout(function(){e&&e(),t.runPoll(e)},1e3)}},{key:"handleSubmit",value:function(){var e=this,t=this.state,a=t.gameName,n=t.startPage,r=t.endPage;k.a.post("/api/task",{gameName:a,startPage:n,endPage:r}).then(function(t){0===t.data.error&&(alert("\u521b\u5efa\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u4efb\u52a1\u5355\u8fd0\u884c"),e.props.history.push("/"))})}},{key:"handleValueChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"render",value:function(){return c.createElement("section",{style:{textAlign:"center"}},c.createElement("br",null),c.createElement("form",{onSubmit:this.handleSubmit},c.createElement("label",null,"\u6e38\u620f\u540d\uff1a\uff08\u8bf7\u8f93\u5165 dota2\uff0ccsgo\u6216\u8005pubg\uff09"),c.createElement(f.a,{type:"text",onChange:this.handleValueChange,name:"gameName",style:{width:"20%"}}),c.createElement("br",null),c.createElement("br",null),c.createElement("label",null,"\u5f00\u59cb\u9875\u6570\uff1a\uff08\u722c\u53d6\u5f00\u59cb\u7684\u9875\u6570\uff0c\u4e00\u822c\u4e3a 1\uff0c\u5e73\u5747\u4e00\u98751500\u6761\u6570\u636e\uff09"),c.createElement(f.a,{type:"number",onChange:this.handleValueChange,name:"startPage",style:{width:"20%"}}),c.createElement("br",null),c.createElement("br",null),c.createElement("label",null,"\u7ed3\u675f\u9875\u6570\uff1a\uff08\u722c\u53d6\u7ed3\u675f\u7684\u9875\u6570\uff0c\u586b-1\u4e3a\u6700\u540e\u4e00\u9875\uff09"),c.createElement(f.a,{type:"number",onChange:this.handleValueChange,name:"endPage",style:{width:"20%"}}),c.createElement("br",null),c.createElement("br",null),c.createElement(y.a,{type:"primary",onClick:this.handleSubmit},"\u5f00\u59cb    \uff01")))}}]),t}(c.Component))||n,j=a(224),O=a(226),C=Object(E.a)(r=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={dataSource:[],progressString:""},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("/api/task").then(function(t){var a=t.data[0];-1===a.status&&e.runPoll(e.getTaskDetail(a._id)),e.setState({dataSource:t.data})})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.poll)}},{key:"runPoll",value:function(e){var t=this;this.poll=setTimeout(function(){e&&e(),t.runPoll(e)},2e3)}},{key:"getTaskDetail",value:function(e){var t=this;return function(){k.a.get("/api/task/".concat(e)).then(function(e){1===e.data.status&&(clearTimeout(t.poll),t.componentDidMount())})}}},{key:"renderStatus",value:function(e){switch(e){case-1:return"\u8fd0\u884c\u4e2d";case 0:return"\u8fd0\u884c\u5931\u8d25";case 1:return"\u6210\u529f\uff01"}}},{key:"handleExport",value:function(e){k.a.get("/api/task/".concat(e._id,"/export")).then(function(e){0===e.data.error&&location.reload()})}},{key:"renderResultUrl",value:function(e){if(1===e.status)return e.resultUrl?c.createElement("p",null,"\u6570\u636e\u4e0b\u8f7d\u94fe\u63a5\uff1a",c.createElement("a",{href:"/".concat(e.resultUrl)},e.resultUrl)):c.createElement("p",null,c.createElement(y.a,{type:"primary",onClick:this.handleExport.bind(this,e)},"\u5bfc\u51fa\u6570\u636e"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,n=t.progressString;return c.createElement("section",null,c.createElement("br",null),a.length>0?a.map(function(t,a){return c.createElement("section",null,c.createElement(j.a,{spinning:1!==t.status,delay:300},c.createElement(O.a,{title:t.desc,hoverable:!0},c.createElement("p",null,"\u521b\u5efa\u65f6\u95f4\uff1a",new Date(t.createdAt).toLocaleTimeString()),c.createElement("p",null,"\u72b6\u6001\uff1a",e.renderStatus(t.status),0===a?n:null),1===t.status?c.createElement("p",null,"\u8017\u65f6\uff1a",t.timeConsuming):null,e.renderResultUrl(t))),c.createElement("br",null),c.createElement("br",null))}):"\u8fd8\u6ca1\u6709\u4efb\u52a1\u5355\u6216\u8005\u4efb\u52a1\u5355\u5df2\u7ecf\u8fc7\u671f\u81ea\u52a8\u5220\u9664\uff0c\u70b9\u51fb\u53f3\u4e0a\u65b9\u53bb\u521b\u5efa\uff01")}}]),t}(c.Component))||r,S=a(225),P=a(227),w=a(51),T=(P.a.SubMenu,P.a.ItemGroup,Object(E.a)(l=function(e){function t(e){var a;switch(Object(m.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).props.location.pathname){case"/create":a.state={current:"create_task"};break;case"/subscribe":a.state={current:"goods_subscribe"};break;case"/":default:a.state={current:"task_list"}}return a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.setState({current:e.key})}},{key:"render",value:function(){return c.createElement("div",null,c.createElement(P.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",theme:"dark"},c.createElement(P.a.Item,{key:"task_list"},c.createElement(S.a,{to:"/"},c.createElement(w.a,{type:"appstore"}),"\u5f53\u524d\u4efb\u52a1\u5355")),c.createElement(P.a.Item,{key:"create_task"},c.createElement(S.a,{to:"/create"},c.createElement(w.a,{type:"appstore"}),"\u521b\u5efa\u65b0\u4efb\u52a1\u5355")),c.createElement(P.a.Item,{key:"goods_subscribe"},c.createElement(S.a,{to:"/subscribe"},c.createElement(w.a,{type:"appstore"}),"\u9970\u54c1\u76d1\u542c"))),this.props.children)}}]),t}(c.Component))||l),_=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return"\u5f00\u53d1\u4e2d\uff01"}}]),t}(c.Component);u.render(c.createElement(s.a,null,c.createElement(o.a,null,c.createElement(T,null,c.createElement(i.a,{path:"/",exact:!0,component:C}),c.createElement(i.a,{path:"/create",component:v}),c.createElement(i.a,{path:"/subscribe",component:_})))),document.getElementById("root"),function(){return console.log("Page \u670d\u52a1\u5df2\u542f\u52a8")})}},[[118,2,1]]]);
//# sourceMappingURL=main.3becc6d4.chunk.js.map